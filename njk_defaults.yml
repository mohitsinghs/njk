---
# options for njk plugin

# task images
images :
  src:
    - app/images/**/*.{svg,png,jpg,gif}
  imagemin:
    gifsicle:
      interlaced : true
    jpegtran :
      progressive : true
    optipng :
      optimizationLevel : 7
    svgo:
      plugins:
        - removeViewBox : false
  dest : dist/images/

# task svg
svg :
  src : app/images/svg-icons/**/*.svg
  dest : app/layouts

# task styles
styles :
  src : app/styles/main.scss
  sass :
    precision: 10,
    includePaths: ['.']
  autoprefixer :
    browsers:
      - "> 1%"
      - last 2 versions
      - Firefox ESR
  outfile: main.css
  csso :
    comments : false
  dest : dist/assets

# task scripts
scripts:
  src:
    - app/scripts/**/*.js
  outfile: main.js
  uglify:
  dest: dist/assets

# task pages
pages :
  src:
    - app/pages/**/*.{njk,md,html}
  nunjucks:
    path: app/layouts
    data: app/data.json
  dest: dist

# task seo
seo:
  src: dist/**/*.html
  url: https://example.com
  critical:
    base : dist
    inline : true
    minify : true
    css : dist/assets/main.css
  htmlmin:
    collapseWhitespace : true
    removeComments : true
  dest : dist

extras:
  - app/robots.txt

# task serve
watch:
  browserSync:
    notify: false,
    server:
      baseDir: dist
  scripts: app/scripts/**/*.js
  styles: app/styles/**/*.scss
  pages:
    - app/pages/**/*.{njk,md,html}
    - app/layouts/**/*.njk
    - app/data.json
  images:
    - app/images/**/*.{svg,png,jpg}

# task deploy
deploy:
  repo : username/reponame
  branch: gh-pages

# task build
build:
  dir: dist
  dest: dist/**/*